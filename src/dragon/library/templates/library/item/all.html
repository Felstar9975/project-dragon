{% extends "dragon/base.html" %}

{% block title %}{{ block.super }} - Library{% endblock %}

{% block content %}
  <form class="form-inline my-2 my-lg-2">
    <input class="form-control mr-sm-2"
           type="search"
           placeholder="Search"
           aria-label="Search"
           name="search"
           value={{ searchterm }}>
    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
  </form>
  <h1>Library</h1>
  <h3><a href="{% url 'library:borrowed' %}">Borrowed from Unigames</a></h3>


  <!-- An "Items" table for displaying every item they have -->
  <h3>Items</h3>
  <table style="width:100%">
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Availability</th>
    </tr>

    <!-- Trying to refer to book/game/card.id to link to their detail page -->
    {% for item in items %}
      <tr>
        {% if item.type == 0 %}
          <td><a href="{% url 'library:book_detail' item.id %}">
            {{ item.name }}
          </a></td>
        {% elif item.type == 1 %}
          <td><a href="{% url 'library:game_detail' item.id %}">
            {{ item.name }}
          </a></td>
        {% elif item.type == 2 %}
          <td><a href="{% url 'library:card_detail' item.id %}">
            {{ item.name }}
          </a></td>
        {% endif %}
        <td>
          {{ item.description }}
        </td>
        <td>
          {{ item.get_type_display }}
        </td>
        <td>
          {{ item.is_available }}
        </td>
      </tr>
    {% endfor %}
  </table>

  <!-- A list of tags created -->
  <h3>List of Tags</h3>
  <table>
    <tr>
      <th>Tag Name</th>
    </tr>
    {% for tag in tags %}
      <tr>
        <td>
          {{ tag.name }}
        </td>
      </tr>
    {% endfor %}
  </table>




  <h1>Add Items</h1>

  <a href="{% url 'library:book_form' %}">Add Book</a><br>
  <a href="{% url 'library:game_form' %}">Add Game</a><br>
  <a href="{% url 'library:card_form' %}">Add Card Game</a><br>
  <a href="{% url 'library:tag_form' %}">Add Tags</a>


{% endblock %}

